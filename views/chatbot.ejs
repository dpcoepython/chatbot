<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=yes">
    <title>RoundTechSquare: Digital and IT solution company - India, USA</title>
    <meta name="description" content="RoundTechSquare is one-stop IT Company for Business IT Solutions and Services. We offer innovative digital solutions to startups, enterprises across industries" />
    <meta name="keywords" content="it company, top it companies, it solutions company, it service company, best it companies, it sector companies, it managed services companies, it service provider companies, managed it solutions, it business support, it maintenance company, IT company in India, IT company in USA" />
    <link rel="shortcut icon" href="../favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- CSS only -->
    <link href="public/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="public/css/main.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <link href="public/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="public/css/chatBot.css" rel="stylesheet" type="text/css" />
    <link href="public/css/timeline.css" rel="stylesheet" type="text/css" />
    <script src="/socket.io/socket.io.js"></script>
</head>
<body style="font-family: Archivo, sans-serif;">
    <!-- Chat bot UI start -->
    <div class="chat-screen">
        <div class="chat-header">
            <div class="chat-header-title">
                Letâ€™s chat? - We're online
            </div>
        </div>
        <div class="chat-mail" id="chat-mail">
            <form id="submission" action="#">
                <div class="row">
                    <div class="col-md-12 text-center mb-2">
                        <p>Hi ðŸ‘‹! Please fill out the form below to start chatting with the next available agent.</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <input id="name" type="text" class="form-control" placeholder="Name" name="name" required>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group">
                            <input id="email" type="email" class="form-control" placeholder="Email" name="email" required>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <button class="btn btn-primary btn-rounded btn-block" id="datasub" type="submit">Start
                            Chat</button>
                    </div>
                </div>
            </form>
        </div>
        <div id="chatbody" class="chat-body hide" style="overflow: auto;">
            <div class="chat-start"></div>
            <div class="chat-bubble you">Welcome to Liiftsocial! How can I help you?
                <br> ðŸ‘‰ About Liiftsocial
                <br> ðŸ‘‰ Features of Liiftsocial
                <br> ðŸ‘‰ Pricing Plans
                <br> ðŸ‘‰ Help Center
                <br> ðŸ‘‰ Contact Us
            </div>
        </div>
        <div class="chat-input hide">
            <input id="userinput" type="text" placeholder="Type a message...">
            <div class="input-action-icon">
                <a id="sendbutton"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" class="feather feather-send">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg></a>
            </div>
        </div>
    </div>
    <div class="chat-bot-icon" id="chatstartbtn">
        <img id="iconimg" src="img/we-are-here.svg" />
        <svg id="svg1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="feather feather-message-square animate">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
        <svg id="svg2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="feather feather-x ">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    </div>
    <!-- Chat Bot UI Ends -->
    <script src="https://ajax.cloudflare.com/cdn-cgi/scripts/7089c43e/cloudflare-static/rocket-loader.min.js"
        data-cf-settings="257be86a981729866f2fa61c-|49" defer=""></script>
    <!-- Time line Html Ends -->
    <!-- BEGIN GLOBAL MANDATORY SCRIPTS -->
    <script src="public/js/jquery-3.1.1.min.js"></script>
    <script src="public/js/popper.min.js"></script>
    <script src="public/js/bootstrap.min.js"></script>
    <script src="public/js/select2.min.js"></script>
    <script>
        $(document).ready(function () {
            $(".select2_el").select2({});
        });
    </script>
    <script type="text/javascript">
        function DisplayCurrentTime() {
            var date = new Date();
            var hours = date.getHours() > 12 ? date.getHours() - 12 : date.getHours();
            var am_pm = date.getHours() >= 12 ? "PM" : "AM";
            hours = hours < 10 ? "0" + hours : hours;
            var minutes = date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes();
            time = hours + ":" + minutes + " " + am_pm;
            return time;
        };
        async function UserMessage(usermsg) {
            var msgContainer = await document.getElementById("chatbody");
            var usermsgElement = await document.createElement("div");
            await usermsgElement.classList.add("chat-bubble", "me");
            usermsgElement.innerText = usermsg;
            await msgContainer.append(usermsgElement);
            var bottypingElement = await document.createElement("div");
            await bottypingElement.classList.add("chat-bubble", "you");
            await bottypingElement.setAttribute("id", "bottyping");
            bottypingElement.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                    style="margin: auto;display: block;shape-rendering: auto;width: 43px;height: 20px;"
                    viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                    <circle cx="0" cy="44.1678" r="15" fill="#ffffff">
                        <animate attributeName="cy" calcMode="spline"
                            keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite"
                            values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.6s"></animate>
                    </circle>
                    <circle cx="45" cy="43.0965" r="15" fill="#ffffff">
                        <animate attributeName="cy" calcMode="spline"
                            keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite"
                            values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.39999999999999997s">
                        </animate>
                    </circle>
                    <circle cx="90" cy="52.0442" r="15" fill="#ffffff">
                        <animate attributeName="cy" calcMode="spline"
                            keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite"
                            values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.19999999999999998s">
                        </animate>
                    </circle>
                </svg>`;
           await msgContainer.append(bottypingElement);
        }

        async function BotMessage(botmsg) {
            var msgContainer = await document.getElementById("chatbody");
            var botmsgElement = await document.createElement("div");
            await botmsgElement.classList.add("chat-bubble", "you");
            botmsgElement.innerHTML = botmsg;
            await msgContainer.append(botmsgElement);
        }
    </script>
    <script>
        let subdatabtn = document.getElementById("datasub");
        let form = document.getElementById("submission");
        let chatbtn = document.getElementById('chatstartbtn');
        var socket = io("http://34.121.118.31:3000/"); // Socket.io server
        // var socket = io("http://localhost:3000"); // Socket.io server localhost
        let chatinput = document.getElementById('userinput');
        let sendbutton = document.getElementById('sendbutton');
        let chatadmin = document.getElementById('chatadmin');
        let botmessage = "";
        sendbutton.addEventListener('click', async function () {
            await socket.emit('userinput', chatinput.value);
            await UserMessage(chatinput.value);
            chatinput.value = "";
            // scroll to bottom when new message came using jquery
            $('#chatbody').animate({
                scrollTop: $('#chatbody').get(0).scrollHeight
            }, 1500);
            $('#bottyping').delay(1000).fadeOut();
        });
        socket.on('botreply', (message) => {
                botmessage = message;
                setTimeout(() => {
                    $("#bottyping").remove();
                    BotMessage(botmessage);
        }, 1000);
        })
        chatinput.addEventListener("keyup", function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                document.getElementById("sendbutton").click();
            }
        });
        chatbtn.onclick = (e) => {
            $('#iconimg').toggleClass('hide');
            $('#svg1').toggleClass('animate');
            $('#svg2').toggleClass('animate');
            $('.chat-screen').toggleClass('show-chat');
        }
        subdatabtn.onclick = (e) => {
            var d = new Date();
            var weekday = new Array(7);
            weekday[0] = "Sunday";
            weekday[1] = "Monday";
            weekday[2] = "Tuesday";
            weekday[3] = "Wednesday";
            weekday[4] = "Thursday";
            weekday[5] = "Friday";
            weekday[6] = "Saturday";
            var day = weekday[d.getDay()];
            var time = DisplayCurrentTime();
            var datetimeformat = day + " " + time;
            $(".chat-start").text(datetimeformat);
            $('.chat-mail').addClass('hide');
            $('.chat-body').removeClass('hide');
            $('.chat-input').removeClass('hide');
            $('.chat-header-option').removeClass('hide');
        }
        form.onsubmit = (e) => {
            console.log("Submit Handler");
            e.preventDefault();
            let name = document.getElementById("name").value;
            let email = document.getElementById("email").value;
            socket.emit('user-info', {
                name,
                email,
            })
        }
    </script>
</body>

</html>